@using Epam_MVC4.Models
@using System.Globalization
@using PagedList.Mvc
@using PagedList
@model IEnumerable<DataRecord>


@if (Model.Count() != 0)
{
    <div class="grid">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>
                        @Html.LabelFor(x => x.FirstOrDefault().TradeDate)
                    </th>
                    <th>
                        @Html.LabelFor(x => x.FirstOrDefault().Open)
                    </th>
                    <th>
                        @Html.LabelFor(x => x.FirstOrDefault().Low)
                    </th>
                    <th>
                        @Html.LabelFor(x => x.FirstOrDefault().High)
                    </th>
                    <th>
                        @Html.LabelFor(x => x.FirstOrDefault().Close)
                    </th>
                    <th>
                        @Html.LabelFor(x => x.FirstOrDefault().Volume)
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td align="left">
                            @Html.DisplayFor(m => item.TradeDate)
                        </td>
                        <td align="left">
                            @Html.DisplayFor(m => item.Open)
                        </td>
                        <td align="left">
                            @Html.DisplayFor(m => item.Low)
                        </td>
                        <td align="left">
                            @Html.DisplayFor(m => item.High)
                        </td>
                        <td align="left">
                            @Html.DisplayFor(m => item.Close)
                        </td>
                        <td align="left">
                            @Html.DisplayFor(m => item.Volume)
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        @Html.PagedListPager((IPagedList)ViewBag.PagedList, page => Url.Action("Index", new { page }), 
                            PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(new AjaxOptions() { HttpMethod = "GET", UpdateTargetId = "data-table" }))
    </div>
    <div class="export">
        <div class="btn-group">
            @foreach (string item in ViewBag.Exports)
            {

                @Html.ActionLink("Export to: " + item, "Export", new { Format = @item }, new { @class = "btn btn-default" })

            }
        </div>
    </div>

}